#!/usr/bin/env ruby

# Dice rolling program
# by Brian Towle -- March 2012

$:.unshift File.join(File.dirname(__FILE__), '..', 'lib')
require 'dieroll'
require 'optparse'

options = {}
OptionParser.new do |opts|
  opts.banner = "Usage: roll [-r] <roll-string>"
  
  options[:results] = false
  opts.on('-r','--results','Show full roll results' ) do
    options[:results] = true
  end

  opts.on('-h','--help','Display this screen') do
    puts opts
    exit
  end

end.parse!

dice = Dieroll::Roller.new(ARGV.first)

dice.roll!
if options[:results]
  puts dice.report
else
  puts dice.total
end
